{
  "_metadata": {
    "source_file": "ExportCRMS/Employees.json",
    "total_employees": 224,
    "purpose": "Comprehensive list of fields to remove during data cleaning",
    "expected_reduction": "30-40% file size reduction",
    "date_analyzed": "2025-11-10"
  },

  "priority_1_always_remove": {
    "description": "These fields should be removed from 100% of records with no exceptions",

    "presale_id_locations": {
      "description": "The presale_id field is ALWAYS null and appears in multiple locations. Remove from ALL locations.",
      "estimated_occurrences": 11200,
      "locations": [
        "employee (top level)",
        "user",
        "user.employee_detail",
        "user.employee_languages[*]",
        "user.employee_skills[*]",
        "user.employee_departments[*]",
        "user.work_experiences[*]",
        "user.employee_documents[*]",
        "video_editing[*]",
        "empl_content[*]",
        "empl_artist[*]",
        "candidate",
        "hr_details"
      ],
      "removal_rule": "Remove 'presale_id' field wherever it appears in the JSON structure"
    },

    "duplicate_data_structures": {
      "description": "These entire objects/structures duplicate data already present elsewhere",
      "estimated_impact": "224-448 large objects",
      "items": [
        {
          "field": "user.employee_detail",
          "reason": "Mirrors the parent employee object",
          "action": "Remove entire user.employee_detail object"
        },
        {
          "field": "hr_details",
          "reason": "Duplicates the candidate object",
          "action": "Remove hr_details if candidate exists, or vice versa (keep only one)"
        },
        {
          "field": "contacts (duplicate)",
          "reason": "Appears in both user object and top level",
          "action": "Remove one of the duplicate contacts arrays"
        }
      ]
    },

    "always_null_in_designation": {
      "description": "These fields in the designation object are consistently null",
      "fields": [
        "designation.created_at",
        "designation.updated_at"
      ],
      "action": "Remove these two fields from all designation objects"
    }
  },

  "priority_2_conditionally_remove": {
    "description": "Remove these fields only if they are null, empty, or meet specific conditions",

    "empty_arrays": {
      "description": "Remove entire array if it's empty []",
      "fields": [
        {
          "path": "user.modules",
          "condition": "Remove if []"
        },
        {
          "path": "user.employee_portfolios",
          "condition": "Remove if []"
        },
        {
          "path": "user.educations",
          "condition": "Remove if []"
        },
        {
          "path": "user.contacts",
          "condition": "Remove if []"
        },
        {
          "path": "task_employees",
          "condition": "Remove if []"
        },
        {
          "path": "correspondences",
          "condition": "Remove if []"
        },
        {
          "path": "contacts",
          "condition": "Remove if []"
        },
        {
          "path": "work_experiences[*].industries",
          "condition": "Remove if []"
        },
        {
          "path": "educations[*].industries",
          "condition": "Remove if []"
        }
      ]
    },

    "null_objects": {
      "description": "Remove entire field if the object is null (not just containing null properties)",
      "fields": [
        {
          "path": "emplcity",
          "condition": "Remove if null"
        },
        {
          "path": "team_lead",
          "condition": "Remove if null"
        },
        {
          "path": "currency",
          "condition": "Remove if null"
        },
        {
          "path": "lead_agent",
          "condition": "Remove if null"
        }
      ]
    },

    "employee_nullable_fields": {
      "description": "Top-level employee fields to remove if null",
      "contact_methods": [
        "telegram",
        "whatsapp",
        "facebook",
        "linkedin",
        "skype",
        "mobile_work_email",
        "work_hemail"
      ],
      "media_fields": [
        "resume_url",
        "photo_url",
        "original_video",
        "url_video_stock",
        "url_contract"
      ],
      "pricing_fields": [
        "full_price",
        "part_price",
        "minimum_price",
        "currency_id",
        "discount"
      ],
      "management_fields": [
        "team_lead_id",
        "note_team_lead",
        "office_id",
        "city_id",
        "attendance_reminder",
        "start_position",
        "last_date",
        "reason_dismissal"
      ],
      "condition": "Remove each field only if null"
    },

    "user_nullable_fields": {
      "description": "User object fields to remove if null",
      "fields": [
        "onesignal_player_id",
        "email_verification_code",
        "social_token",
        "two_factor_recovery_codes",
        "salutation",
        "two_fa_verify_via",
        "two_factor_code",
        "two_factor_expires_at",
        "country_id",
        "authorize_id",
        "authorize_payment_id",
        "card_brand",
        "card_last_four",
        "last_login"
      ],
      "condition": "Remove each field only if null"
    },

    "empaddress_nullable_fields": {
      "description": "Address object fields to remove if null",
      "fields": [
        "empaddress.street",
        "empaddress.house",
        "empaddress.flat",
        "empaddress.postal_code"
      ],
      "condition": "Remove each field only if null",
      "note": "Keep the empaddress object and non-null fields (city_id, region_id, country_id, dates)"
    },

    "position_nullable_fields": {
      "description": "Position object fields to remove if null",
      "fields": [
        "position.full_price",
        "position.part_price",
        "position.minimum_price",
        "position.currency_id",
        "position.url_meet"
      ],
      "condition": "Remove each field only if null"
    },

    "candidate_nullable_fields": {
      "description": "Candidate/HR details object fields to remove if null or empty",
      "null_fields": [
        "empl_protege",
        "admin_name_id",
        "created_by",
        "courses",
        "date_video_added",
        "last_contact_date",
        "follow_up_date",
        "age",
        "shift_id",
        "expected_salary",
        "expected_salary_currency_id",
        "started_salary",
        "started_currency_id",
        "note",
        "note_admin",
        "status_admin_id",
        "instagram",
        "photo_url",
        "resume_url",
        "video_interview_url",
        "test_link",
        "job_site_link",
        "start_time",
        "end_date",
        "portfolio_url",
        "telegram",
        "resume_editor",
        "note_team_lead",
        "sub_titles",
        "team_lead_id",
        "date_interview"
      ],
      "empty_string_fields": [
        "video_url"
      ],
      "condition": "Remove if null or empty string"
    },

    "work_experiences_nullable_fields": {
      "description": "Fields to remove from work_experiences array items if null",
      "fields": [
        "hr_detail_id",
        "responsibilities",
        "client_details_id",
        "industries"
      ],
      "condition": "Remove if null or empty array"
    },

    "responsibilities_nullable_fields": {
      "description": "Fields to remove from responsibilities array items if null",
      "fields": [
        "parent_id",
        "product_id",
        "responsibility_id",
        "min_hours",
        "max_hours"
      ],
      "condition": "Remove if null"
    },

    "lead_agent_nullable_fields": {
      "description": "Fields to remove from lead_agent object if null",
      "fields": [
        "added_by",
        "last_updated_by"
      ],
      "condition": "Remove if null. If all fields are null except id/company_id/user_id, consider removing entire object"
    }
  },

  "priority_3_clean_project_arrays": {
    "description": "Clean fields within project-specific array items",

    "video_editing_nullable_fields": {
      "description": "Fields to remove from video_editing array items if null",
      "fields": [
        "start_date",
        "due_date",
        "video_editor_id",
        "video_editor_created_by",
        "url_video_to_drive_disk",
        "url_video_to_youtube",
        "url_youtube_short",
        "youtube_description",
        "youtube_hashtags",
        "sub_titles"
      ],
      "condition": "Remove if null",
      "special_note": "If all optional fields are null (only id, employee_details_id, project_company_id, approved, dates remain), consider if item is meaningful"
    },

    "empl_content_nullable_fields": {
      "description": "Fields to remove from empl_content array items if null or empty",
      "null_fields": [
        "smm_manager_id",
        "smm_manager_created_by",
        "smm_start_date",
        "smm_updated_date",
        "copywriter_manager_id",
        "copywriter_manager_created_by",
        "copywriter_start_date",
        "copywriter_updated_date",
        "content_manager_id",
        "content_manager_created_by",
        "content_start_date",
        "content_updated_date"
      ],
      "empty_string_fields": [
        "seo_title",
        "cv_heading"
      ],
      "whitespace_fields": [
        "meta_description"
      ],
      "condition": "Remove if null, empty string, or whitespace-only"
    },

    "empl_artist_nullable_fields": {
      "description": "Fields to remove from empl_artist array items if null or empty",
      "fields": [
        "url_portrait",
        "promo_pic",
        "artist_id",
        "artist_created_by",
        "artist_start_date",
        "artist_updated_date",
        "created_at"
      ],
      "condition": "Remove if null or empty string",
      "special_note": "If all optional fields are null (only id, employee_details_id, updated_at remain), consider if item is meaningful"
    }
  },

  "priority_4_optional_normalization": {
    "description": "Optional improvements - not strictly necessary but can improve data quality",

    "empty_string_conversion": {
      "description": "Convert empty strings to null or remove them",
      "action": "Remove or convert to null",
      "fields": [
        "video_url: ''",
        "seo_title: ''",
        "cv_heading: ''",
        "Any field with whitespace-only string"
      ]
    },

    "boolean_normalization": {
      "description": "Convert string booleans to actual boolean types",
      "warning": "Only do this if system supports boolean types",
      "conversion": {
        "from": ["'0'", "'1'"],
        "to": ["false", "true"]
      },
      "fields": [
        "approved",
        "is_student",
        "is_approved_manager",
        "super_admin",
        "email_notifications",
        "two_factor_confirmed",
        "two_factor_email_confirmed",
        "dark_theme",
        "rtl",
        "admin_approval",
        "permission_sync",
        "google_calendar_status"
      ]
    },

    "number_normalization": {
      "description": "Convert string numbers to numeric types",
      "warning": "Only do this if system expects numeric IDs",
      "conversion": {
        "example": "'123' -> 123"
      },
      "fields": [
        "company_id",
        "user_id",
        "Various ID fields"
      ]
    }
  },

  "data_quality_flags": {
    "description": "Flag these records for manual review during cleaning",

    "test_placeholder_data": {
      "description": "Records with suspicious test/placeholder values",
      "patterns": [
        {
          "field": "name_eng, name_ua, short_name",
          "suspicious_values": ["вап", "явап", "ывап"],
          "reason": "Gibberish/test data"
        },
        {
          "field": "address",
          "suspicious_values": ["address"],
          "reason": "Generic placeholder"
        },
        {
          "field": "reason_dismissal",
          "suspicious_values": ["ывап"],
          "reason": "Gibberish"
        }
      ]
    },

    "invalid_default_values": {
      "description": "Values that may indicate missing/invalid data",
      "patterns": [
        {
          "field": "time_interview",
          "suspicious_values": ["00:00:00"],
          "reason": "May indicate no interview scheduled"
        },
        {
          "field": "hourly_rate",
          "suspicious_values": ["0", "very low values"],
          "reason": "May indicate missing rate"
        }
      ]
    },

    "incomplete_records": {
      "description": "Employees missing critical information",
      "checks": [
        "No contact methods (all null: viber, telegram, whatsapp, work_email)",
        "No valid address (all address fields null)",
        "Empty skills and languages arrays"
      ]
    }
  },

  "validation_checklist": {
    "description": "Verify these after cleaning",
    "checks": [
      {
        "check": "Record count",
        "expected": "Still exactly 224 employees",
        "critical": true
      },
      {
        "check": "Required fields present",
        "expected": "All employees have: id, company_id, user_id, employee_id, name_eng, name_ua, user object, department, position, designation",
        "critical": true
      },
      {
        "check": "No data loss",
        "expected": "Spot-check 5-10 employees to ensure meaningful data preserved",
        "critical": true
      },
      {
        "check": "File size",
        "expected": "30-40% reduction",
        "critical": false
      },
      {
        "check": "JSON validity",
        "expected": "Valid JSON syntax",
        "critical": true
      },
      {
        "check": "No trailing commas",
        "expected": "No syntax errors from trailing commas",
        "critical": true
      }
    ]
  },

  "impact_summary": {
    "presale_id_removal": {
      "fields_removed": "~11,200",
      "percentage": "~40%"
    },
    "duplicate_structures": {
      "objects_removed": "224-448",
      "percentage": "~15%"
    },
    "empty_arrays": {
      "arrays_removed": "1,120-1,792",
      "percentage": "~10%"
    },
    "null_fields": {
      "fields_removed": "Several thousand",
      "percentage": "~25%"
    },
    "total_estimated_reduction": {
      "file_size": "30-40%",
      "field_count": "40-50%",
      "data_loss": "0% (only removing null/empty/duplicate)"
    }
  }
}
